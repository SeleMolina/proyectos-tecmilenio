package evidenciaPartefinal;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;

public class Doctor {
		//ubicacion del archivo para dar persitencia
	private	String csvdoctor = "D:\\ProyectosTecmilenio\\Actividad2_Metodos_Atributos\\src\\evidenciaPartefinal\\doctores.csv";	
	private int idDoctor;
	private String nomDoctor;
	private String espDoctor;
	
	public Doctor(int idDoctor, String nomDoctor, String espDoctor) {
		this.idDoctor = idDoctor;
		this.nomDoctor = nomDoctor;
		this.espDoctor = espDoctor;
		
	}
	
	// metodo para cargar
	public ArrayList<Doctor> Load() {
		ArrayList<Doctor> doctores = new ArrayList<>();    
		
		 try (BufferedReader br = new BufferedReader(new FileReader(csvdoctor))) {
	            String line;
	            while ((line = br.readLine()) != null) {
	                String[] data = line.split(",");
	                if (data.length == 3) {
	                    int idDoctor = Integer.parseInt(data[0].trim());
	                    String nomDoctor = data[1].trim();
	                    String espDoctor = data[2].trim();
	                    doctores.add(new Doctor(idDoctor, nomDoctor, espDoctor));
	                 } else {
	                    System.out.println("Error: La l√≠nea no tiene el formato esperado.");
	                }
	            }
	        } catch (IOException e) {
	            e.printStackTrace();
	            System.out.println("Error al leer el archivo CSV.");
	        }
		 return doctores;
	}
	
	public void save() {
		
        try (BufferedWriter bw = new BufferedWriter(new FileWriter(csvdoctor, true))) {
            String line = idDoctor + "," + nomDoctor + "," + espDoctor;
            bw.write(line);
            bw.newLine();
            System.out.println("Datos guardados en el archivo CSV.");
        } catch (IOException e) {
            e.printStackTrace();
            System.out.println("Error al guardar los datos en el archivo CSV.");
        }
	}
}
